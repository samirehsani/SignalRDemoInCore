@*@model List<Article>*@
<div class="row">
    <div class="col-10 offset-1">
        <a class="btn btn-primary" asp-area="" asp-controller="Article" asp-action="Add">Add Article</a>
        <h3>Articles</h3>
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <th>Article Id</th>
                    <th>Article Name</th>
                </tr>
            </thead>
            <tbody id="articleBody">
                @*display data here*@

                @*@foreach (var art in Model)
                 {
                    <tr>
                        <td>@art.ArticleId</td>
                        <td>@art.ArticleName</td>
                    </tr>
                 }*@

            </tbody>
        </table>
    </div>
</div>
<script src="~/lib/signalr/dist/browser/signalr.js"></script>
<script src="~/lib/Notification/Notification.js"></script>
<button onclick="JoinCategory()">Join category</button>

<script>

    // receive message for all
    connection.on("ReceiveMessage", message => {
        var data = JSON.parse(message);
        ShowData(data);  
    });

    // JoinCategory
    function JoinCategory() {
        SubscribeToCategory("samir");
    }

    // receive message for category
    connection.on("CategoryReceiveMessage", message => {
        var data = JSON.parse(message);
        ShowData(data);  
    });

    //show article data
    function ShowData(article) {
        var tbody = document.querySelector("#articleBody");
        var tr = document.createElement("tr");

        var tdForArticleId = document.createElement("td");
        var tdForArticleName = document.createElement("td");

        tdForArticleId.textContent = article.ArticleId;
        tdForArticleName.textContent = article.ArticleName;

        tr.appendChild(tdForArticleId);
        tr.appendChild(tdForArticleName);
        tbody.appendChild(tr);
    }





















    //var connection = new signalR.HubConnectionBuilder().withUrl("/NotificationHub").build();
    //connection.on("SendMessageAsync", article => {
    //    var stringData = JSON.stringify(article);
    //    var data = JSON.parse(stringData);
    //    ShowData(data);
    //});
    //connection.start().catch(function (err) {
    //    return console.error(err.toString());
    //});


    //connection.on("ReceiveMessage", article => {
    //    var data = JSON.parse(article);
    //    ShowData(data);  
    //});


    //var result = GetData();
    //console.log(result);
    //var data = JSON.parse(data);
    //ShowData(data);

    @* $.ajax({
        url: "@Url.Action("Index")",
        type: "Get",
        success: function (data) {
            console.log(data);
        }

    });*@


</script>